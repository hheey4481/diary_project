<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" th:href="@{/css/diary/calendar.css}">
    <link rel="stylesheet" th:href="@{/css/diary/menu.css}">
    <link rel="stylesheet" th:href="@{/css/diary/index.css}">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <title>너의 하루</title>
</head>
<body>
<div class="container">
    <div th:replace="~{layout/calender :: calendarFragment}"></div>
    <div class="container-right">
        <div class="header">
            <h1 class="title" id="title"></h1>

            <button class="btn-new-entry" id="write" onclick="location.href='/diary/write'" >오늘의 일기 쓰기</button>
        </div>
        <div class="entries">
            <div class="entry-list" th:each="diary : ${diaryList} " th:onclick="'window.location.href=\'/diary/show/' + ${diary.id} + '\';'">
                <div class="entry-header">
                    <h3 class="entry-title" th:text="${diary.subject}"></h3>
                    <p class="entry-date" th:text="${#strings.substring(diary.date, 0, 10)}"></p>
                </div>
                <div class="entry-content">
                    <p th:text="${diary.content.length() > 50 ? #strings.substring(diary.content, 0, 50) + '.....' : diary.content}"></p>
                </div>
            </div>
        </div>
    </div>
</div>
<script th:src="@{/js/calender/calender.js}"></script>
<script th:src="@{/js/calender/menu.js}"></script>
<!--일기 작성 여부에 따라 작성 버튼 활성/비활성화 기능 자바스크립트 코드-->
<!--<script th:inline="javascript">-->
<!--    //-->
<!--    document.addEventListener('DOMContentLoaded', function () {-->
<!--        var diaryList = [[${diaryList}]];-->
<!--        var today = new Date().toISOString().slice(0, 10);-->
<!--        var isTodayDiaryWritten = diaryList.some(function(diary) {-->
<!--            return diary.date.startsWith(today);-->
<!--        });-->

<!--        var newEntryButton = document.getElementById('write');-->
<!--        if (isTodayDiaryWritten) {-->
<!--            newEntryButton.disabled = true;-->
<!--            newEntryButton.textContent = '오늘의 일기는 이미 작성되었습니다';-->
<!--        } else {-->
<!--            newEntryButton.disabled = false;-->
<!--        }-->
<!--    });-->
<!--</script>-->
</body>
</html>